<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>SvfOpportunityBatch</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>受注検討票_出力</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>/** 
  * Generated by SVF Cloud. Please do not edit. 
 */ 
 {!REQUIRESCRIPT(&apos;//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js&apos;)} 
  
 var ids = {!GETRECORDIDS($ObjectType.Opportunity)}; 
  
 if (ids != &quot;&quot;){ 
   (function callout(){ 
     var target = &quot;svfpreview_&quot; + new Date().getTime(); 
     window.open(&quot;about:blank&quot;, target, &quot;menubar=no, toolbar=no, scrollbars=yes, resizable=yes&quot;); 
  
     var sortKey = &quot;&quot;; 
     var dir = &quot;&quot;; 
     var returnUrl = $(&quot;#retURL&quot;).val(); 
     if (returnUrl) { 
       var instanceId = returnUrl.replace(/^[^?]*[?][^=]*=([^&amp;]*).*/, &quot;$1&quot;); 
       if (instanceId) { 
         var viewport = ListViewport.instances[instanceId]; 
         if (viewport &amp;&amp; viewport.grid) { 
           var sortState = viewport.grid.getView().sortState; 
           var colModel = viewport.grid.getColumnModel(); 
           if (sortState &amp;&amp; colModel) { 
             var field = sortState.field; 
             if (field) { 
               var col = colModel.getColumnsBy(function(config) { 
                 return field === config.dataIndex; 
               }); 
               if (col &amp;&amp; col[0]) { 
                 sortKey = col[0].dataIndex.replace(/_/g,&apos;&apos;); 
                 dir = sortState.dir; 
               } 
             } 
           } 
         } 
       } 
  
       if (sortKey == &quot;&quot; &amp;&amp; typeof searchResultClick !== &quot;undefined&quot;) { 
         if(searchResultClick.clickResults){ 
           var sortState = searchResultClick.clickResults.sorts[&quot;Opportunity&quot;]; 
           if(sortState){ 
             sortKey = sortState.substring(0,sortState.indexOf(&quot;=&quot;)); 
             dir = sortState.substr(sortState.indexOf(&quot;=&quot;),1); 
             (dir == 1)? dir = &quot;ASC&quot; : dir = &quot;DESC&quot;; 
           } else { 
             sortKey = &quot;Opportunity.Name&quot;; 
             dir = &quot;ASC&quot;; 
           } 
         } 
       } 
     } 
  
     var form = document.createElement(&quot;form&quot;); 
     form.method = &quot;POST&quot;; 
     form.action = &quot;https://sfdc.svfcloud.com/svf-cloud-service/sfdc/callout&quot;; 
     form.target = target; 
  
     var input; 
     input = document.createElement(&quot;input&quot;); 
     input.setAttribute(&quot;name&quot;, &quot;callback&quot;); 
     input.setAttribute(&quot;type&quot;, &quot;hidden&quot;); 
     input.setAttribute(&quot;value&quot;, &quot;https://ap2.salesforce.com/apex/SvfOpportunityPage&quot;); 
     form.appendChild(input); 
  
     input = document.createElement(&quot;input&quot;); 
     input.setAttribute(&quot;name&quot;, &quot;ids&quot;); 
     input.setAttribute(&quot;type&quot;, &quot;hidden&quot;); 
     input.setAttribute(&quot;value&quot;, ids.toString()); 
     form.appendChild(input); 
  
     input = document.createElement(&quot;input&quot;); 
     input.setAttribute(&quot;name&quot;, &quot;sortKey&quot;); 
     input.setAttribute(&quot;type&quot;, &quot;hidden&quot;); 
     input.setAttribute(&quot;value&quot;, sortKey); 
     form.appendChild(input); 
  
     input = document.createElement(&quot;input&quot;); 
     input.setAttribute(&quot;name&quot;, &quot;dir&quot;); 
     input.setAttribute(&quot;type&quot;, &quot;hidden&quot;); 
     input.setAttribute(&quot;value&quot;, dir); 
     form.appendChild(input); 
  
     var body = document.getElementsByTagName(&quot;body&quot;)[0]; 
     body.appendChild(form); 
     form.submit(); 
     body.removeChild(form); 
   })(); 
 } else { 
   alert(&quot;Not selected!&quot;); 
 }</url>
</WebLink>
